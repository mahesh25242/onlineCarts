<div class="container">  
  <form [formGroup]="editProfileFrm" *ngIf="(loggedUser$ | async) as loggedUser" (ngSubmit)="updateProfile()">
    <img [src]="loggedUser.avatar" class="avatar-img img-thumbnail" />
    <button type="button" (click)="fileInput.click()" mat-mini-fab color="primary" >
      <mat-icon>file_upload</mat-icon>
      <input #fileInput type="file" (change)="onFileInput($event)" accept="image/*" style="display:none;" />
    </button>
    Created At: {{ loggedUser?.created_at |  date:'dd/MM/yy'}}
    Last Login: {{ loggedUser?.last_login?.created_at  |  date:'dd/MM/yy'}}

    <div FxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="20px">
      <div fxFlex="50%" fxFlex.xs="100%">
        <div>
          <mat-form-field class="full-width-text" appearance="standard" fxFill>
            <mat-label>First Name</mat-label>
            <input autocomplete="fname" matInput formControlName="name" placeholder="First Name" required maxlength="200">
            <mat-hint align="end" *ngIf="f?.['fname']?.value?.length">{{f?.['fname']?.value?.length}} / 200</mat-hint>
            <mat-error *ngIf="f?.['fname']?.errors && f?.['fname']?.errors?.['error']">
              {{f?.['fname']?.errors?.['error']}}
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field class="full-width-text" appearance="standard" fxFill>
            <mat-label>Phone Number</mat-label>
            <input type="tel" autocomplete="phone" matInput formControlName="phone" placeholder="Phone Number" required maxlength="12">
            <mat-hint align="end" *ngIf="f?.['phone']?.value?.length">{{f?.['phone']?.value?.length}} / 12</mat-hint>
            <mat-error *ngIf="f?.['phone']?.errors && f?.['phone']?.errors?.['error']">
              {{f?.['phone']?.errors?.['error']}}
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field class="full-width-text" appearance="standard" fxFill>
            <mat-label>Email</mat-label>
            <input type="email" autocomplete="email" matInput formControlName="email" placeholder="Email" required maxlength="200">
            <mat-hint align="end" *ngIf="f?.['email']?.value?.length">{{f?.['email']?.value?.length}} / 200</mat-hint>
            <mat-error *ngIf="f?.['email']?.errors && f?.['email']?.errors?.['error']">
              {{f?.['email']?.errors?.['error']}}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div fxFlex="50%" fxFlex.xs="100%">
        <div>
          <mat-form-field class="full-width-text" appearance="standard" fxFill>
            <mat-label>Last Name</mat-label>
            <input autocomplete="lname" matInput formControlName="lname" placeholder="Last Name" required maxlength="200">
            <mat-hint align="end" *ngIf="f?.['lname']?.value?.length">{{f?.['lname']?.value?.length}} / 200</mat-hint>
            <mat-error *ngIf="f?.['lname']?.errors && f?.['lname']?.errors?.['error']">
              {{f?.['lname']?.errors?.['error']}}
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field class="full-width-text" appearance="standard" fxFill>
            <mat-label>Email</mat-label>
            <input type="email" autocomplete="email" matInput formControlName="email" placeholder="Email" required maxlength="200">
            <mat-hint align="end" *ngIf="f?.['email']?.value?.length">{{f?.['email']?.value?.length}} / 200</mat-hint>
            <mat-error *ngIf="f?.['email']?.errors && f?.['email']?.errors?.['error']">
              {{f?.['email']?.errors?.['error']}}
            </mat-error>
          </mat-form-field>      
        </div>

      </div>
    </div>
  
    <mat-checkbox color="primary" formControlName="isChanegPassword">Change Password?</mat-checkbox>

    <div FxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="20px">
      <div fxFlex="50%" fxFlex.xs="100%">
        <mat-form-field class="full-width-text" appearance="standard" fxFill>
          <mat-label>Password</mat-label>
          <input type="password" autocomplete="new-password" matInput formControlName="password" placeholder="Password" required maxlength="200">
          <mat-hint align="end" *ngIf="f?.['password']?.value?.length">{{f?.['password']?.value?.length}} / 200</mat-hint>
          <mat-error *ngIf="f?.['password']?.errors && f?.['password']?.errors?.['error']">
            {{f?.['password']?.errors?.['error']}}
          </mat-error>
        </mat-form-field>
      </div>
      <div fxFlex="50%" fxFlex.xs="100%">
        <mat-form-field class="full-width-text" appearance="standard" fxFill>
          <mat-label>Confirm Password</mat-label>
          <input type="password" autocomplete="new-password" matInput formControlName="password_confirmation" placeholder="Confirm Password" required maxlength="200">
          <mat-hint align="end" *ngIf="f?.['password_confirmation']?.value?.length">{{f ?.['password_confirmation']?.value?.length }} / 200</mat-hint>
          <mat-error *ngIf="f?.['password_confirmation']?.errors && f?.['password_confirmation']?.errors?.['error']">
            {{ f?.['password_confirmation']?.errors?.['error'] }}
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <button mat-raised-button color="primary" type="submit">Submit</button>    
    
  </form>
  <br/><br/>
</div>
