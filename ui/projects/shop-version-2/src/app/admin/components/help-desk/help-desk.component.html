<form [formGroup]="ticketFrm" (submit)="save()">

  <mat-form-field appearance="fill">
    <mat-label>Ticket Type</mat-label>
    <mat-select matInput formControlName="type" required>
      <mat-option *ngFor="let type of types$ | async" [value]="type.id">
        {{type.name}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="f.type.errors && f.type.errors.error">
      {{f.type.errors.error}}
    </mat-error>
  </mat-form-field>

  <mat-form-field class="full-width-text" appearance="standard">
    <mat-label>Subject</mat-label>
    <input matInput formControlName="subject" placeholder="Ex. Cake" required maxlength="200">
    <mat-hint align="end" *ngIf="f.subject?.value?.length">{{f.subject?.value?.length}} / 200</mat-hint>
    <mat-error *ngIf="f.subject.errors && f.subject.errors.error">
      {{f.subject.errors.error}}
    </mat-error>
  </mat-form-field>


  <mat-form-field class="col-item" appearance="standard">
    <mat-label>Reason</mat-label>
    <textarea matInput formControlName="reason" placeholder="Ex. mentioned your query"
    maxlength="200"></textarea>
    <mat-error *ngIf="f.reason.errors && f.reason.errors.error">
      {{f.description.errors.error}}
    </mat-error>
  </mat-form-field>

<button mat-raised-button color="primary" type="submit">Submit</button>

</form>


<div *ngIf="tickets$ | async as tickets">
  <mat-card *ngFor="let tkt of tickets">
    <mat-card-header>
      <mat-card-title>{{tkt.subject}} <mat-chip [selected]="true">{{ tkt.status_text }}</mat-chip></mat-card-title>
      <mat-card-subtitle *ngIf="tkt?.help_ticket_type?.name">{{tkt?.help_ticket_type?.name}}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      {{ tkt.content}}
    </mat-card-content>
  </mat-card>
</div>
