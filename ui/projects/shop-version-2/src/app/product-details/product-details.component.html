<ng-container *ngIf="product">

  <h2>{{ product.name}}</h2>
  <mat-card-subtitle>{{ product.shop_product_selected_variant?.name}}</mat-card-subtitle>
  <form [formGroup]="addToCartFrm" (ngSubmit)="addToCart()">
    <div class="product-image">
      <div *ngIf="product.shop_product_selected_variant?.type.id"
      [matTooltip]="(product?.shop_product_selected_variant?.type.id == 1) ? 'Veg' : ( (product?.shop_product_selected_variant?.type.id == 2) ? 'Non-Veg':'' )"
      [ngClass]="{'veg': product.shop_product_selected_variant?.type.id == 1, 'nonveg': product.shop_product_selected_variant?.type.id == 2}"></div>
      <img loading="lazy"  [src]="(product.shop_product_selected_variant?.shop_product_image?.image) ?  product.shop_product_selected_variant.shop_product_image.image_path : 'assets/no-image.jpg'" [alt]="product.name+' '+product.shop_product_selected_variant?.name">
  </div>
      <mat-form-field appearance="standard" *ngIf="(product.shop_product_variant.length > 1)">
        <mat-label>Choose Varient</mat-label>
        <mat-select formControlName="shop_product_variant_id" required (selectionChange)="chooseVarient()">
          <mat-option *ngFor="let shop_product_variant of product.shop_product_variant" [value]="shop_product_variant.id">
            {{shop_product_variant.name}} - ₹ {{shop_product_variant.price}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="f.shop_product_variant_id.errors && f.shop_product_variant_id.errors.error">
          {{f.shop_product_variant_id.errors.error}}
        </mat-error>
      </mat-form-field>


      <div class="relativePosition">
      <button type="button" mat-icon-button color="primary" (click)="updateCart('-')" [disabled]="qty<2"
      matTooltip="Decrease the quantity" class="animate__animated"
      [ngClass]="{'animate__flipInY' : qty<2 }">
        <mat-icon>remove_circle_outline</mat-icon>
      </button>
      {{qty}}
      <button type="button" mat-icon-button color="primary" (click)="updateCart('+')"
      matTooltip="Increase the quantity">
        <mat-icon>add_circle_outline</mat-icon>
      </button>
</div>
      <ng-container *ngIf="product.shop_product_selected_variant?.price">
        <div class="float-right">
        <del *ngIf="product.shop_product_selected_variant?.actual_price">₹ {{ product.shop_product_selected_variant?.actual_price }}</del>
        <span class="weight-bold animate__animated animate__flipInX"> ₹ {{ product.shop_product_selected_variant?.price * qty }} </span>
        <!-- <span *ngIf="product.shop_product_selected_variant?.type.id">
          {{ product.shop_product_selected_variant?.type.name }}
        </span> -->
        </div>
        <p >{{ product.shop_product_selected_variant?.description }}</p>
      </ng-container>


      <!-- <mat-form-field class="full-width-text" appearance="standard">
        <mat-label>Message</mat-label>
        <textarea matInput formControlName="message" placeholder="Ex. Happy Birth Day John Doe"></textarea>
        <mat-error *ngIf="f.message.errors && f.message.errors.error">
          {{f.message.errors.error}}
        </mat-error>
      </mat-form-field> -->
      <button class="mat-primary_yellow" mat-raised-button color="primary" type="submit">Add</button>


      <p class="mt-5 clear-p" *ngIf="product.description">
        {{ product.description}}
      </p>
    </form>
</ng-container>
