<ng-container *ngIf="product">

  <div class="container">
    <mat-cart>
      <mat-card-header>
        <mat-card-title>{{ product.name }}</mat-card-title>
        <h5>{{ product.shop_product_selected_variant?.name }}</h5>
      </mat-card-header>

      <form [formGroup]="addToCartFrm" (ngSubmit)="addToCart()">

        <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between">
          <div fxFlex="35%" fxFlex.xs="100%">
            <div fxLayout="column" fxLayoutAlign="space-between">
              <div class="mat-card-headerimage" fxFlex="100%"
                [ngStyle]="{'background-image': (product.shop_product_selected_variant?.shop_product_image?.image) ? 'url(' +  product.shop_product_selected_variant.shop_product_image.image_path + ')' : 'url(/assets/no-image.jpg)'}">
                <div *ngIf="product.shop_product_selected_variant?.type.id"
                [matTooltip]="(product?.shop_product_selected_variant?.type.id == 1) ? 'Veg' : ( (product?.shop_product_selected_variant?.type.id == 2) ? 'Non-Veg':'' )"
                [ngClass]="{'veg': product.shop_product_selected_variant?.type.id == 1, 'nonveg': product.shop_product_selected_variant?.type.id == 2}"></div>
                <!-- <img loading="lazy"  [src]="(product.shop_product_selected_variant?.shop_product_image?.image) ?  product.shop_product_selected_variant.shop_product_image.image_path : 'assets/no-image.jpg'" [alt]="product.name+' '+product.shop_product_selected_variant?.name"> -->
              </div>


            </div>

            <button  [ngClass.lt-sm]="'full-width'"  mat-raised-button color="primary" type="submit">Add To Cart</button>




          </div>
          <div fxFlex="65%" fxFlex.xs="100%" [ngClass.gt-sm]="'description'">
            <h3>About {{product.name}} </h3>

            <mat-form-field  appearance="standard" *ngIf="(product.shop_product_variant.length > 1)">
              <mat-label>Choose Varient</mat-label>
              <mat-select formControlName="shop_product_variant_id" required (selectionChange)="chooseVarient()">
                <mat-option *ngFor="let shop_product_variant of product.shop_product_variant" [value]="shop_product_variant.id">
                  {{shop_product_variant.name}} - ₹ {{shop_product_variant.price}}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="f.shop_product_variant_id.errors && f.shop_product_variant_id.errors.error">
                {{f.shop_product_variant_id.errors.error}}
              </mat-error>
            </mat-form-field>


            <div class="relativePosition" >
              <button type="button" mat-icon-button color="primary" (click)="updateCart('-')" [disabled]="qty<2"
              matTooltip="Decrease the quantity" class="animate__animated"
              [ngClass]="{'animate__flipInY' : qty<2 }">
                <mat-icon>remove_circle_outline</mat-icon>
              </button>
              {{qty}}
              <button type="button" mat-icon-button color="primary" (click)="updateCart('+')"
              matTooltip="Increase the quantity">
                <mat-icon>add_circle_outline</mat-icon>
              </button>
            </div>
            <div  class="price"   *ngIf="product.shop_product_selected_variant?.price">
              <del *ngIf="product.shop_product_selected_variant?.actual_price">₹ {{ product.shop_product_selected_variant?.actual_price * qty }}</del>
              &nbsp;&nbsp;<span class="weight-bold animate__animated animate__flipInX"> ₹ {{ product.shop_product_selected_variant?.price * qty }} </span>
            </div>

            <p *ngIf="product.description">
              {{ product.description}}
            </p>

            <h5>About {{product.name}} - {{product.shop_product_selected_variant.name}}</h5>
            <p>{{product.shop_product_selected_variant?.description}}</p>
          </div>
        </div>









    </form>
    </mat-cart>
  </div>
</ng-container>
